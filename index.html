<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>おばあちゃん牧場</title>

  <!-- Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root{
      --header-h:88px;
      --card-height: calc(100vh - var(--header-h) - 48px);
    }
    html,body{height:100%}
    body {
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: #ffffff;
      color: #0f172a;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      cursor: none;
    }

    /* custom cursor */
    .cursor-dot {
      position: fixed;
      pointer-events: none;
      z-index: 99999;
      left: 0; top: 0;
      width: 18px; height: 18px;
      border-radius: 999px;
      background: rgba(34,197,94,0.95);
      transform: translate(-50%, -50%) scale(1);
      transition: transform 160ms cubic-bezier(.2,.9,.3,1), width 160ms, height 160ms, background 160ms, opacity 160ms;
      box-shadow: 0 6px 20px rgba(16,24,40,0.12);
      opacity: 0.95;
    }
    .cursor-dot.big { transform: translate(-50%, -50%) scale(1.8); width: 38px; height: 38px; background: rgba(16,185,129,0.95); }
    @media (hover: none) { body { cursor:auto; } .cursor-dot { display:none; } }

    @keyframes fadeInUp { from {opacity:0; transform: translateY(20px)} to {opacity:1; transform: translateY(0)} }
    .fadeInUp { animation: fadeInUp 700ms ease both; }

    .card-frame {
      border: 3px solid #16a34a;
      border-radius: 20px;
      background: linear-gradient(180deg, rgba(255,255,255,0.98), #fff);
      box-shadow: 0 20px 50px rgba(2,6,23,0.06);
      transition: transform .28s cubic-bezier(.2,.9,.3,1), box-shadow .28s;
      overflow: hidden;
    }
    .card-frame:hover { transform: translateY(-6px) scale(1.03); box-shadow: 0 30px 60px rgba(16,24,40,0.12); }

    .check-item { display:flex; gap:12px; align-items:flex-start; }
    .check-badge { min-width:40px; min-height:40px; border-radius:8px; background:#10b981; color:white; display:inline-flex; align-items:center; justify-content:center; font-weight:700; box-shadow: 0 6px 16px rgba(16,185,129,0.14); flex-shrink:0; }

    .btn-cta { display:inline-flex; align-items:center; justify-content:center; gap:12px; padding:18px 30px; border-radius:14px; font-weight:700; box-shadow: 0 14px 40px rgba(2,6,23,0.08); transition: transform .12s ease, box-shadow .12s ease, background .12s; }
    .btn-cta:hover { transform: translateY(-4px); }

    @media (max-width: 900px) {
      :root { --card-height: auto; }
      body { font-size: 15px; }
      .btn-cta { padding:14px 20px; }
    }

    header { height: var(--header-h); backdrop-filter: blur(4px); }
  </style>
</head>
<body>
  <div id="cursor" class="cursor-dot" aria-hidden></div>

  <!-- headerは省略（元コードのまま残す） -->

  <main class="pt-[calc(var(--header-h)+12px)]">

    <!-- ここまで省略: 他のセクションは元コード通り -->

    <!-- CONTACT -->
    <section id="contact" class="min-h-screen px-8 py-16 fadeInUp">
      <div class="max-w-3xl mx-auto">
        <h2 class="text-5xl font-extrabold mb-6 text-center">✉️ お問い合わせ</h2>
        <p class="text-center text-gray-600 mb-8">メール不要。フォームに入力で送信できます（送信は Firebase に POST します）。</p>

        <form id="contactForm" class="bg-white card-frame p-8" onsubmit="return false;">
          <!-- new select -->
          <label class="block text-lg font-semibold mb-2">お問い合わせの種類（必須）</label>
          <select id="type" class="w-full mb-4 p-4 border rounded-xl text-lg" required>
            <option value="">選択してください</option>
            <option value="general">一般</option>
            <option value="terms">利用規約について</option>
            <option value="bug">バグ報告</option>
            <option value="other">その他</option>
          </select>

          <label class="block text-lg font-semibold mb-2">お名前（必須）</label>
          <input id="name" class="w-full mb-4 p-4 border rounded-xl text-lg" required />

          <label class="block text-lg font-semibold mb-2">メール（任意）</label>
          <input id="email" class="w-full mb-4 p-4 border rounded-xl text-lg" placeholder="未入力可" />

          <label class="block text-lg font-semibold mb-2">本文（必須）</label>
          <textarea id="message" class="w-full mb-6 p-4 border rounded-xl text-lg h-44" required></textarea>

          <div class="flex gap-4">
            <button id="sendBtn" class="btn-cta bg-green-600 text-white">送信</button>
            <button id="resetBtn" class="btn-cta bg-white border">リセット</button>
          </div>

          <p class="text-sm text-gray-400 mt-4">送信先: retrochat-74f95-default-rtdb (Realtime Database) — Firebase ルールが必要です。</p>
        </form>
      </div>
    </section>

    <!-- FOOTER -->
    <footer class="py-10 text-center text-sm text-gray-500">© <span id="year"></span> おばあちゃん牧場</footer>
  </main>

  <script>
    // set year
    document.getElementById('year').textContent = new Date().getFullYear();

    // cursor logic（元コードのまま）

    // Rick Roll（省略: 元コードのまま）

    // contact form
    (function(){
      const sendBtn = document.getElementById('sendBtn');
      const resetBtn = document.getElementById('resetBtn');
      const typeInput = document.getElementById('type');
      const nameInput = document.getElementById('name');
      const emailInput = document.getElementById('email');
      const messageInput = document.getElementById('message');

      function toast(msg, isError=false){
        const t = document.createElement('div');
        t.textContent = msg;
        t.className = 'fixed bottom-8 right-8 bg-white p-4 rounded-xl shadow-lg';
        t.style.border = isError ? '2px solid #ef4444' : '2px solid #10b981';
        document.body.appendChild(t);
        setTimeout(()=> t.remove(), 3500);
      }

      sendBtn.addEventListener('click', async (e) => {
        e.preventDefault();
        const type = typeInput.value;
        const name = nameInput.value.trim();
        const message = messageInput.value.trim();
        if(!type || !name || !message){ toast('種類・お名前・本文は必須です', true); return; }
        sendBtn.disabled = true; sendBtn.textContent = '送信中…';
        try {
          const payload = { type, name, email: emailInput.value.trim(), message, createdAt: new Date().toISOString() };
          const res = await fetch('https://retrochat-74f95-default-rtdb.firebaseio.com/contacts.json', {
            method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload)
          });
          if(!res.ok) throw new Error('HTTP ' + res.status);
          toast('送信しました — 担当よりご連絡します');
          typeInput.value=''; nameInput.value = ''; emailInput.value = ''; messageInput.value = '';
        } catch(err){
          console.error(err);
          toast('送信に失敗しました（設定を確認）', true);
        } finally {
          sendBtn.disabled = false; sendBtn.textContent = '送信';
        }
      });

      resetBtn.addEventListener('click', (e) => {
        e.preventDefault();
        typeInput.value=''; nameInput.value=''; emailInput.value=''; messageInput.value='';
        toast('フォームをリセットしました');
      });
    })();
  </script>
</body>
</html>
